.\" Automatically generated by Pod::Man 4.09 (Pod::Simple 3.35)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\" ========================================================================
.\"
.IX Title "Bio::Phylo::Util::Logger 3"
.TH Bio::Phylo::Util::Logger 3 "2014-02-08" "perl v5.26.2" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Bio::Phylo::Util::Logger \- Logger of internal messages of several severity
levels
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 4
\& use strict;
\& use Bio::Phylo::Util::Logger \*(Aq:levels\*(Aq; # import level constants
\& use Bio::Phylo::IO \*(Aqparse\*(Aq;
\& use Bio::Phylo::Factory; 
\& 
\& # Set the verbosity level of the tree class.
\& # "DEBUG" is the most verbose level. All log messages
\& # emanating from the tree class will be 
\& # transmitted. For this to work the level constants
\& # have to have been imported!
\& use Bio::Phylo::Forest::Tree \*(Aqverbose\*(Aq => DEBUG; # note: DEBUG is not quoted!
\& 
\& # Create a file handle for logger to write to.
\& # This is not necessary, by default the logger
\& # writes to STDERR, but sometimes you will want
\& # to write to a file, as per this example.
\& open my $fh, \*(Aq>\*(Aq, \*(Aqparsing.log\*(Aq or die $!;
\& 
\& # Create a logger object.
\& my $fac = Bio::Phylo::Factory\->new;
\& my $logger = $fac\->create_logger;
\& 
\& # Set the verbosity level of the set_name
\& # method in the base class. Messages coming
\& # from this method will be transmitted.
\& $logger\->VERBOSE( 
\&     \*(Aq\-level\*(Aq  => DEBUG, # note, not quoted, this is a constant!
\&     \*(Aq\-method\*(Aq => \*(AqBio::Phylo::set_name\*(Aq, # quoted, otherwise bareword error!
\& );
\& 
\& # \*(AqListeners\*(Aq are subroutine references that
\& # are executed when a message is transmitted.
\& # The first argument passed to these subroutines
\& # is the log message. This particular listener
\& # will write the message to the \*(Aqparsing.log\*(Aq
\& # file, if the $fh file handle is still open.
\& $logger\->set_listeners(
\&     sub {
\&         my ($msg) = @_;
\&         if ( $fh\->opened ) {
\&             print $fh $msg;
\&         }
\&     }
\& );
\&
\& # Now parse a tree, and see what is logged.
\& my $tree = parse( 
\&     \*(Aq\-format\*(Aq => \*(Aqnewick\*(Aq, 
\&     \*(Aq\-string\*(Aq => do { local $/; <DATA> },
\& )\->first;
\&
\& # Cleanly close the log handle.
\& close $fh;
\& 
\& _\|_DATA_\|_
\& ((((A,B),C),D),E);
.Ve
.PP
The example above will write something like the following to the log file:
.PP
.Vb 6
\& INFO Bio::Phylo::Forest::Tree::new [Bio/Phylo/Forest/Tree.pm, 99] \- constructor called for \*(AqBio::Phylo::Forest::Tree\*(Aq
\& INFO Bio::Phylo::set_name [Bio/Phylo.pm, 281] \- setting name \*(AqA\*(Aq
\& INFO Bio::Phylo::set_name [Bio/Phylo.pm, 281] \- setting name \*(AqB\*(Aq
\& INFO Bio::Phylo::set_name [Bio/Phylo.pm, 281] \- setting name \*(AqC\*(Aq
\& INFO Bio::Phylo::set_name [Bio/Phylo.pm, 281] \- setting name \*(AqD\*(Aq
\& INFO Bio::Phylo::set_name [Bio/Phylo.pm, 281] \- setting name \*(AqE\*(Aq
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This class defines a logger, a utility object for logging messages.
The other objects in Bio::Phylo use this logger to give detailed feedback
about what they are doing at per-class, per-method, user-configurable log levels
(\s-1DEBUG, INFO, WARN, ERROR\s0 and \s-1FATAL\s0). These log levels are constants that are
optionally exported by this class by passing the ':levels' argument to your
\&'use' statement, like so:
.PP
.Vb 1
\& use Bio::Phylo::Util::Logger \*(Aq:levels\*(Aq;
.Ve
.PP
If for some reason you don't want this behaviour (i.e. because there is
something else by these same names in your namespace) you must use the fully
qualified names for these levels, i.e. Bio::Phylo::Util::Logger::DEBUG and
so on.
.PP
The least verbose is level \s-1FATAL,\s0 in which case only 'fatal' messages are shown. 
The most verbose level, \s-1DEBUG,\s0 shows debugging messages, including from internal 
methods (i.e. ones that start with underscores, and special '\s-1ALLCAPS\s0' perl 
methods like \s-1DESTROY\s0 or \s-1TIEARRAY\s0). For example, to monitor what the root class 
is doing, you would say:
.PP
.Vb 1
\& $logger\->( \-class => \*(AqBio::Phylo\*(Aq, \-level => DEBUG )
.Ve
.PP
To define global verbosity you can omit the \-class argument. To set verbosity
at a more granular level, you can use the \-method argument, which takes a 
fully qualified method name such as 'Bio::Phylo::set_name', such that messages
originating from within that method's body get a different verbosity level.
.SH "METHODS"
.IX Header "METHODS"
.SS "\s-1CONSTRUCTOR\s0"
.IX Subsection "CONSTRUCTOR"
.IP "\fInew()\fR" 4
.IX Item "new()"
Constructor for Logger.
.Sp
.Vb 11
\& Type    : Constructor
\& Title   : new
\& Usage   : my $logger = Bio::Phylo::Util::Logger\->new;
\& Function: Instantiates a logger
\& Returns : a Bio::Phylo::Util::Logger object
\& Args    : \-level  => Bio::Phylo::Util::Logger::INFO (DEBUG/INFO/WARN/ERROR/FATAL)
\&           \-class  => a package (or array ref) for which to set verbosity (optional)
\&           \-method => a sub name (or array ref) for which to set verbosity (optional)
\&           \-file   => a file to which to append logging messages
\&           \-listeners => array ref of subs that handle logging messages
\&           \-prefix    => a path fragment to strip from the paths in logging messages
.Ve
.SS "\s-1VERBOSITY LEVELS\s0"
.IX Subsection "VERBOSITY LEVELS"
.IP "\s-1FATAL\s0" 4
.IX Item "FATAL"
Rarely happens, usually an exception is thrown instead.
.IP "\s-1ERROR\s0" 4
.IX Item "ERROR"
If this happens, something is seriously wrong that needs to be addressed.
.IP "\s-1WARN\s0" 4
.IX Item "WARN"
If this happens, something is seriously wrong that needs to be addressed.
.IP "\s-1INFO\s0" 4
.IX Item "INFO"
If something weird is happening, turn up verbosity to this level as it might
explain some of the assumptions the code is making.
.IP "\s-1DEBUG\s0" 4
.IX Item "DEBUG"
This is very verbose, probably only useful if you write core Bio::Phylo code.
.SS "\s-1LOGGING METHODS\s0"
.IX Subsection "LOGGING METHODS"
.IP "\fIdebug()\fR" 4
.IX Item "debug()"
Prints argument debugging message, depending on verbosity.
.Sp
.Vb 6
\& Type    : logging method
\& Title   : debug
\& Usage   : $logger\->debug( "debugging message" );
\& Function: prints debugging message, depending on verbosity
\& Returns : invocant
\& Args    : logging message
.Ve
.IP "\fIinfo()\fR" 4
.IX Item "info()"
Prints argument informational message, depending on verbosity.
.Sp
.Vb 6
\& Type    : logging method
\& Title   : info
\& Usage   : $logger\->info( "info message" );
\& Function: prints info message, depending on verbosity
\& Returns : invocant
\& Args    : logging message
.Ve
.IP "\fIwarn()\fR" 4
.IX Item "warn()"
Prints argument warning message, depending on verbosity.
.Sp
.Vb 6
\& Type    : logging method
\& Title   : warn
\& Usage   : $logger\->warn( "warning message" );
\& Function: prints warning message, depending on verbosity
\& Returns : invocant
\& Args    : logging message
.Ve
.IP "\fIerror()\fR" 4
.IX Item "error()"
Prints argument error message, depending on verbosity.
.Sp
.Vb 6
\& Type    : logging method
\& Title   : error
\& Usage   : $logger\->error( "error message" );
\& Function: prints error message, depending on verbosity
\& Returns : invocant
\& Args    : logging message
.Ve
.IP "\fIfatal()\fR" 4
.IX Item "fatal()"
Prints argument fatal message, depending on verbosity.
.Sp
.Vb 6
\& Type    : logging method
\& Title   : fatal
\& Usage   : $logger\->fatal( "fatal message" );
\& Function: prints fatal message, depending on verbosity
\& Returns : invocant
\& Args    : logging message
.Ve
.IP "\fIset_listeners()\fR" 4
.IX Item "set_listeners()"
Adds listeners to send log messages to.
.Sp
.Vb 10
\& Type    : Mutator
\& Title   : set_listeners()
\& Usage   : $logger\->set_listeners( sub { warn shift } )
\& Function: Sets additional listeners to log to (e.g. a file)
\& Returns : invocant
\& Args    : One or more code references
\& Comments: On execution of the listeners, the @_ arguments are:
\&           $log_string, # the formatted log string
\&           $level,      # log level, i.e DEBUG, INFO, WARN, ERROR or FATAL
\&           $subroutine, # the calling subroutine
\&           $filename,   # filename where log method was called
\&           $line,       # line where log method was called
\&           $msg         # the unformatted message
.Ve
.IP "\s-1\fIPREFIX\s0()\fR" 4
.IX Item "PREFIX()"
Getter and setter of path prefix to strip from source file paths in messages.
By default, messages will have a field such as \f(CW\*(C`[$PREFIX/Bio/Phylo.pm, 280]\*(C'\fR,
which indicates the message was sent from line 280 in file Bio/Phylo.pm inside
path \f(CW$PREFIX\fR. This is done so that your log won't be cluttered with 
unnecessarily long paths. To find out what \f(CW$PREFIX\fR is set to, call the 
\&\s-1\fIPREFIX\s0()\fR method on the logger, and to change it provide a path argument 
relative to which the paths to source files will be constructed.
.Sp
.Vb 7
\& Type    : Mutator/Accessor
\& Title   : PREFIX()
\& Usage   : $logger\->PREFIX( \*(Aq/path/to/bio/phylo\*(Aq )
\& Function: Sets/gets $PREFIX
\& Returns : Verbose level
\& Args    : Optional: a path
\& Comments:
.Ve
.IP "\s-1\fIVERBOSE\s0()\fR" 4
.IX Item "VERBOSE()"
Setter for the verbose level. This comes in five levels:
.Sp
.Vb 2
\&    FATAL = only fatal messages (though, when something fatal happens, you\*(Aqll most 
\&    likely get an exception object), 
\&    
\&    ERROR = errors (hopefully recoverable), 
\&    
\&    WARN = warnings (recoverable), 
\&    
\&    INFO = info (useful diagnostics), 
\&    
\&    DEBUG = debug (almost every method call)
.Ve
.Sp
Without additional arguments, i.e. by just calling \s-1VERBOSE\s0( \-level => \f(CW$level\fR ),
you set the global verbosity level. By default this is 2. By increasing this
level, the number of messages quickly becomes too great to make sense out of.
To focus on a particular class, you can add the \-class => 'Some::Class' 
(where 'Some::Class' stands for any of the class names in the Bio::Phylo 
release) argument, which means that messages originating from that class will 
have a different (presumably higher) verbosity level than the global level. 
By adding the \-method => 'Fully::Qualified::method_name' (say, 
\&'Bio::Phylo::set_name'), you can change the verbosity of a specific method. When
evaluating whether or not to transmit a message, the method-specific verbosity
level takes precedence over the class-specific level, which takes precedence
over the global level.
.Sp
.Vb 6
\& Type    : Mutator
\& Title   : VERBOSE()
\& Usage   : $logger\->VERBOSE( \-level => $level )
\& Function: Sets/gets verbose level
\& Returns : Verbose level
\& Args    : \-level   => 4 # or lower
\& 
\&           # optional, or any other class 
\&           \-class   => \*(AqBio::Phylo\*(Aq 
\&           
\&           # optional, fully qualified method name
\&           \-method\*(Aq => \*(AqBio::Phylo::set_name\*(Aq
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
There is a mailing list at <https://groups.google.com/forum/#!forum/bio\-phylo> 
for any user or developer questions and discussions.
.PP
Also see the manual: Bio::Phylo::Manual and <http://rutgervos.blogspot.com>.
.SH "CITATION"
.IX Header "CITATION"
If you use Bio::Phylo in published research, please cite it:
.PP
\&\fBRutger A Vos\fR, \fBJason Caravas\fR, \fBKlaas Hartmann\fR, \fBMark A Jensen\fR
and \fBChase Miller\fR, 2011. Bio::Phylo \- phyloinformatic analysis using Perl.
\&\fI\s-1BMC\s0 Bioinformatics\fR \fB12\fR:63.
<http://dx.doi.org/10.1186/1471\-2105\-12\-63>
